import CodeOutputBlock from '../../code-output-block.jsx';

```bash
pip install ipywidgets -q
```

<CodeOutputBlock lang="bash">

```
    huggingface/tokenizers: The current process just got forked, after parallelism has already been used. Disabling parallelism to avoid deadlocks...
    To disable this warning, you can either:
    	- Avoid using `tokenizers` before the fork if possible
    	- Explicitly set the environment variable TOKENIZERS_PARALLELISM=(true | false)
```

</CodeOutputBlock>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->


```python
from guardrails import Guard
from pydantic import BaseModel

# JSONFormer is only compatible with HF Pipelines and HF Models:
from transformers import pipeline


class Dog(BaseModel):
    name: str
    color: str
    weight_kg: float


class NewFriends(BaseModel):
    dogs: list[Dog]


guard = Guard.for_pydantic(NewFriends, output_formatter="jsonformer")


tiny_llama_pipeline = pipeline("text-generation", "TinyLlama/TinyLlama-1.1B-Chat-v1.0")

# Inference is straightforward:
response = guard(
    tiny_llama_pipeline,
    messages=[{"role": "user", "content": "Please enjoy this list of good dogs:"}],
)
```

<CodeOutputBlock lang="python">

```
    /Users/dtam/dev/guardrails/guardrails/validator_service/__init__.py:85: UserWarning: Could not obtain an event loop. Falling back to synchronous validation.
      warnings.warn(


    {
      "dogs": [
        {
          "name": "Max",
          "color": "red",
          "weight_kg": 20.555
        },
        {
          "name": "Lola",
          "color": "blue",
          "weight_kg": 15.234
        },
        {
          "name": "Sarah",
          "color": "green",
          "weight_kg": 10.567
        }
      ]
    }
```

</CodeOutputBlock>


```python
# `out` is a dict.  Format it as JSON for readability:
import json

print(json.dumps(response.validated_output, indent=2))
```
