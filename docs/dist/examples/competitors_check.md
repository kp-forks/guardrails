import CodeOutputBlock from '../../code-output-block.jsx';

# Check if a competitor is named

!!! note
To download this example as a Jupyter notebook, click [here](https://github.com/guardrails-ai/guardrails/blob/main/docs/src/examples/competitors_check.ipynb).


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->

We first need to install the ```CompetitorCheck``` validator from Guardrails Hub: 



```bash
pip install nltk --quiet
 guardrails hub install hub://guardrails/competitor_check --quiet
```

<CodeOutputBlock lang="bash">

```
    Installing hub://guardrails/competitor_check...
    ✅Successfully installed guardrails/competitor_check!
    
    
```

</CodeOutputBlock>


```python
from guardrails.hub import CompetitorCheck
import guardrails as gd
from rich import print
```

## Using competitor check validator

This validator checks LLM output to flag sentences naming one of your competitors and removes those sentences from the final output. When setting on-fail to 'fix' this validator will remove the flagged sentences from the output. You need to provide an extensive list of your competitors' names including all common variations (e.g. JP Morgan, JP Morgan Chase, etc.) the compilation of this list will have an impact on the ultimate outcome of the validation.


## Set up a competitors list



```python
# Generate competitors list
competitors_list = [
    "Acorns",
    "Citigroup",
    "Citi",
    "Fidelity Investments",
    "Fidelity",
    "JP Morgan Chase and company",
    "JP Morgan",
    "JP Morgan Chase",
    "JPMorgan Chase",
    "ChaseM1 Finance",
    "Stash Financial Incorporated",
    "Stash",
    "Tastytrade Incorporated",
    "Tastytrade",
    "ZacksTrade",
    "Zacks Trade",
]
```

## Set up example text to test the validator



```python
# Define some text to test the validator
text = """\
In the dynamic realm of finance, several prominent entities have emerged as key players,\
leaving an indelible mark on the industry. Acorns, a fintech innovator, has revolutionized saving \
and investing with its user-friendly app. Citigroup, a multinational investment bank, stands as a \
pillar of financial expertise, offering a wide array of services to clients worldwide. HSBC, with \
its extensive global network, has become a powerhouse in the banking sector, catering to the needs \
of millions across different countries. JP Morgan, a venerable institution with a rich history, has \
established itself as a comprehensive financial powerhouse, providing a diverse range of services \
from investment banking to asset management. Santander, a Spanish multinational bank, has earned a \
reputation for its responsible banking practices and customer-centric approach, serving as a trusted \
financial partner to individuals and businesses alike. Together, Acorns, Citi, HSBC, JP Morgan, and \
Santander have redefined the financial landscape, shaping the way we save, invest, and manage our \
money on a global scale.\
"""
```

## Test the validator

Here, we use the text we defined above as an example llm output (`llm_output`).

We also set the on_fail behavior to 'fix' so that the validator will remove the sentences that mention competitors from the output.
We can adjust this behavior by changing it to 'reask' or 'throw'.



```python
# Create the Guard with the CompetitorCheck Validator
guard = gd.Guard().use(CompetitorCheck(competitors=competitors_list, on_fail="fix"))

# Test with a given text
output = guard.parse(
    llm_output=text,
    metadata={},
)

print(output)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "/Users/dtam/dev/guardrails/guardrails/validator_service/__init__.py:85: UserWarning: Could not obtain an event loop. Falling back to synchronous validation.<br />      warnings.warn(<br /><br /><br /><br /><br /><pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"color: #800080; text-decoration-color: #800080; font-weight: bold\">ValidationOutcome</span><span style=\"font-weight: bold\">(</span><br />    <span style=\"color: #808000; text-decoration-color: #808000\">call_id</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'14233082752'</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">raw_llm_output</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'In the dynamic realm of finance, several prominent entities have emerged as key players,leaving</span><br /><span style=\"color: #008000; text-decoration-color: #008000\">an indelible mark on the industry. Acorns, a fintech innovator, has revolutionized saving and investing with its </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">user-friendly app. Citigroup, a multinational investment bank, stands as a pillar of financial expertise, offering </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">a wide array of services to clients worldwide. HSBC, with its extensive global network, has become a powerhouse in </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">the banking sector, catering to the needs of millions across different countries. JP Morgan, a venerable </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">institution with a rich history, has established itself as a comprehensive financial powerhouse, providing a </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">diverse range of services from investment banking to asset management. Santander, a Spanish multinational bank, has</span><br /><span style=\"color: #008000; text-decoration-color: #008000\">earned a reputation for its responsible banking practices and customer-centric approach, serving as a trusted </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">financial partner to individuals and businesses alike. Together, Acorns, Citi, HSBC, JP Morgan, and Santander have </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">redefined the financial landscape, shaping the way we save, invest, and manage our money on a global scale.'</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">validated_output</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'In the dynamic realm of finance, several prominent entities have emerged as key </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">players,leaving an indelible mark on the industry.[COMPETITOR], a fintech innovator, has revolutionized saving and </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">investing with its user-friendly app.[COMPETITOR], a multinational investment bank, stands as a pillar of financial</span><br /><span style=\"color: #008000; text-decoration-color: #008000\">expertise, offering a wide array of services to clients worldwide.HSBC, with its extensive global network, has </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">become a powerhouse in the banking sector, catering to the needs of millions across different </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">countries.[COMPETITOR], a venerable institution with a rich history, has established itself as a comprehensive </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">financial powerhouse, providing a diverse range of services from investment banking to asset management.Santander, </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">a Spanish multinational bank, has earned a reputation for its responsible banking practices and customer-centric </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">approach, serving as a trusted financial partner to individuals and businesses alike.Together, [COMPETITOR], </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">[COMPETITOR], HSBC, [COMPETITOR], and Santander have redefined the financial landscape, shaping the way we save, </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">invest, and manage our money on a global scale.'</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">reask</span>=<span style=\"color: #800080; text-decoration-color: #800080; font-style: italic\">None</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">validation_passed</span>=<span style=\"color: #00ff00; text-decoration-color: #00ff00; font-style: italic\">True</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">error</span>=<span style=\"color: #800080; text-decoration-color: #800080; font-style: italic\">None</span><br /><span style=\"font-weight: bold\">)</span><br /></pre>"}} />


```python
# See guard history
print(guard.history.last.tree)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Logs<br />└── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮<br />    │ <span style=\"background-color: #e7dfeb\">╭─────────────────────────────────────────────── Messages ────────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ No messages.                                                                                            │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ In the dynamic realm of finance, several prominent entities have emerged as key players,leaving an      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ indelible mark on the industry. Acorns, a fintech innovator, has revolutionized saving and investing    │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ with its user-friendly app. Citigroup, a multinational investment bank, stands as a pillar of financial │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ expertise, offering a wide array of services to clients worldwide. HSBC, with its extensive global      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ network, has become a powerhouse in the banking sector, catering to the needs of millions across        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ different countries. JP Morgan, a venerable institution with a rich history, has established itself as  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ a comprehensive financial powerhouse, providing a diverse range of services from investment banking to  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ asset management. Santander, a Spanish multinational bank, has earned a reputation for its responsible  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ banking practices and customer-centric approach, serving as a trusted financial partner to individuals  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ and businesses alike. Together, Acorns, Citi, HSBC, JP Morgan, and Santander have redefined the         │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ financial landscape, shaping the way we save, invest, and manage our money on a global scale.           │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ 'In the dynamic realm of finance, several prominent entities have emerged as key players,leaving an     │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ indelible mark on the industry.[COMPETITOR], a fintech innovator, has revolutionized saving and         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ investing with its user-friendly app.[COMPETITOR], a multinational investment bank, stands as a pillar  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ of financial expertise, offering a wide array of services to clients worldwide.HSBC, with its extensive │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ global network, has become a powerhouse in the banking sector, catering to the needs of millions across │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ different countries.[COMPETITOR], a venerable institution with a rich history, has established itself   │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ as a comprehensive financial powerhouse, providing a diverse range of services from investment banking  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ to asset management.Santander, a Spanish multinational bank, has earned a reputation for its            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ responsible banking practices and customer-centric approach, serving as a trusted financial partner to  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ individuals and businesses alike.Together, [COMPETITOR], [COMPETITOR], HSBC, [COMPETITOR], and          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ Santander have redefined the financial landscape, shaping the way we save, invest, and manage our money │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ on a global scale.'                                                                                     │</span> │<br />    │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br /></pre>"}} />
