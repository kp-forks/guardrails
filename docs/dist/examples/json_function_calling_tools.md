import CodeOutputBlock from '../../code-output-block.jsx';

```bash
guardrails hub install hub://guardrails/regex_match --quiet
```

<CodeOutputBlock lang="bash">

```
    Installing hub://guardrails/regex_match...
    ✅Successfully installed guardrails/regex_match!
    
    
```

</CodeOutputBlock>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->


```python
chat_history = """
nelson and murdock: i need a pickup 797 9th Avenue, manila envelope, June 3 10:00am with dropoff 10:30am Courthouse, 61 Center Street C/O frank james
operator: quote - $23.00
neslon and murdock: perfect, we accept the quote
operator: 797 9th ave, 10:00am pickup comfirmed
abc flowers: i need a pickup of a flowers from abc flowers at 21 3rd street at 11:00am on june 2 with a dropoff at 75th Ave at 5:30pm same day
operator: 21 3rd street flowers quote - $14.50
abc flowers: accepted
polk and wardell: i need a pickup of a bagels from Bakers Co at 331 5th street at 11:00am on june 3 with a dropoff at 75th Ave at 5:30pm same day
operator: 331 5th street bagels quote - $34.50
polk and wardell: accepted
"""

prompt = """
From the chat exchanges below extract a schedule of deliveries.
Chats:
${chat_history}
"""
```


```python
from rich import print
from guardrails import Guard
from guardrails.hub import RegexMatch
from pydantic import BaseModel, Field
from typing import List

NAME_REGEX = "^[A-Z][a-z]+\\s[A-Z][a-z]+$"


class Delivery(BaseModel):
    custome_name: str = Field(
        validators=[RegexMatch(regex=NAME_REGEX, on_fail="noop")],
        description="customer name",
    )
    pickup_time: str = Field(description="date and time of pickup")
    pickup_location: str = Field(description="address of pickup")
    dropoff_time: str = Field(description="date and time of dropoff")
    dropoff_location: str = Field(description="address of dropoff")
    price: str = Field(description="price of delivery with currency symbol included")


class Schedule(BaseModel):
    deliveries: List[Delivery]


pydantic_guard = Guard.for_pydantic(Schedule)

# Generate the function calling tool and add it to the list
pydantic_guard_tools = pydantic_guard.json_function_calling_tool([])

print(pydantic_guard_tools)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-weight: bold\">[</span><br />    <span style=\"font-weight: bold\">{</span><br />        <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'function'</span>,<br />        <span style=\"color: #008000; text-decoration-color: #008000\">'function'</span>: <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'gd_response_tool'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'A tool for generating responses to guardrails. It must be called last in every </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">response.'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'parameters'</span>: <span style=\"font-weight: bold\">{</span><br />                <span style=\"color: #008000; text-decoration-color: #008000\">'$defs'</span>: <span style=\"font-weight: bold\">{</span><br />                    <span style=\"color: #008000; text-decoration-color: #008000\">'Delivery'</span>: <span style=\"font-weight: bold\">{</span><br />                        <span style=\"color: #008000; text-decoration-color: #008000\">'properties'</span>: <span style=\"font-weight: bold\">{</span><br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'custome_name'</span>: <span style=\"font-weight: bold\">{</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'customer name'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Custome Name'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'validators'</span>: <span style=\"font-weight: bold\">[{</span><span style=\"color: #008000; text-decoration-color: #008000\">'rail_alias'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'guardrails/regex_match'</span><span style=\"font-weight: bold\">}]</span><br />                            <span style=\"font-weight: bold\">}</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_time'</span>: <span style=\"font-weight: bold\">{</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'date and time of pickup'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Pickup Time'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span><br />                            <span style=\"font-weight: bold\">}</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_location'</span>: <span style=\"font-weight: bold\">{</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'address of pickup'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Pickup Location'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span><br />                            <span style=\"font-weight: bold\">}</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_time'</span>: <span style=\"font-weight: bold\">{</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'date and time of dropoff'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Dropoff Time'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span><br />                            <span style=\"font-weight: bold\">}</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_location'</span>: <span style=\"font-weight: bold\">{</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'address of dropoff'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Dropoff Location'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span><br />                            <span style=\"font-weight: bold\">}</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'price'</span>: <span style=\"font-weight: bold\">{</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'price of delivery with currency symbol included'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Price'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span><br />                            <span style=\"font-weight: bold\">}</span><br />                        <span style=\"font-weight: bold\">}</span>,<br />                        <span style=\"color: #008000; text-decoration-color: #008000\">'required'</span>: <span style=\"font-weight: bold\">[</span><br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'custome_name'</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_time'</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_location'</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_time'</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_location'</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'price'</span><br />                        <span style=\"font-weight: bold\">]</span>,<br />                        <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Delivery'</span>,<br />                        <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'object'</span><br />                    <span style=\"font-weight: bold\">}</span><br />                <span style=\"font-weight: bold\">}</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'properties'</span>: <span style=\"font-weight: bold\">{</span><br />                    <span style=\"color: #008000; text-decoration-color: #008000\">'deliveries'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'items'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'$ref'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'#/$defs/Delivery'</span><span style=\"font-weight: bold\">}</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Deliveries'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'array'</span><span style=\"font-weight: bold\">}</span><br />                <span style=\"font-weight: bold\">}</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'required'</span>: <span style=\"font-weight: bold\">[</span><span style=\"color: #008000; text-decoration-color: #008000\">'deliveries'</span><span style=\"font-weight: bold\">]</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'object'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'title'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Schedule'</span><br />            <span style=\"font-weight: bold\">}</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'required'</span>: <span style=\"font-weight: bold\">[</span><span style=\"color: #008000; text-decoration-color: #008000\">'deliveries'</span><span style=\"font-weight: bold\">]</span><br />        <span style=\"font-weight: bold\">}</span><br />    <span style=\"font-weight: bold\">}</span><br /><span style=\"font-weight: bold\">]</span><br /></pre>"}} />


```python
rail = """
<rail version="0.1">
    <output>
        <list name="deliveries">
            <object>
                <string name="customer_name" validators="hub://guardrails/regex_match: ^[A-Z][a-z]+\\s[A-Z][a-z]+$" description="customer name" on-fail-guardrails_regex_match="reask" />
                <string name="pickup_time" description="date and time of pickup" />
                <string name="pickup_location" description="address of pickup" />
                <string name="dropoff_time" description="date and time of dropoff" />
                <string name="dropoff_location" description="address of dropoff" />
                <string name="price" description="price of delivery with currency symbol included" />
            </object>
        </list>
    </output>
</rail>
"""

rail_guard = Guard.for_rail_string(rail)


# Generate the function calling tool and add it to the list
rail_guard_tools = rail_guard.json_function_calling_tool([])

print(rail_guard_tools)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-weight: bold\">[</span><br />    <span style=\"font-weight: bold\">{</span><br />        <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'function'</span>,<br />        <span style=\"color: #008000; text-decoration-color: #008000\">'function'</span>: <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'gd_response_tool'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'A tool for generating responses to guardrails. It must be called last in every </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">response.'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'parameters'</span>: <span style=\"font-weight: bold\">{</span><br />                <span style=\"color: #008000; text-decoration-color: #008000\">'properties'</span>: <span style=\"font-weight: bold\">{</span><br />                    <span style=\"color: #008000; text-decoration-color: #008000\">'deliveries'</span>: <span style=\"font-weight: bold\">{</span><br />                        <span style=\"color: #008000; text-decoration-color: #008000\">'items'</span>: <span style=\"font-weight: bold\">{</span><br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'properties'</span>: <span style=\"font-weight: bold\">{</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'customer_name'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'customer name'</span><span style=\"font-weight: bold\">}</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_time'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'date and time of pickup'</span><span style=\"font-weight: bold\">}</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_location'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'address of pickup'</span><span style=\"font-weight: bold\">}</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_time'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'date and time of dropoff'</span><span style=\"font-weight: bold\">}</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_location'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'address of dropoff'</span><span style=\"font-weight: bold\">}</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'price'</span>: <span style=\"font-weight: bold\">{</span><br />                                    <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'string'</span>,<br />                                    <span style=\"color: #008000; text-decoration-color: #008000\">'description'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'price of delivery with currency symbol included'</span><br />                                <span style=\"font-weight: bold\">}</span><br />                            <span style=\"font-weight: bold\">}</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'required'</span>: <span style=\"font-weight: bold\">[</span><br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'customer_name'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_time'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_location'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_time'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_location'</span>,<br />                                <span style=\"color: #008000; text-decoration-color: #008000\">'price'</span><br />                            <span style=\"font-weight: bold\">]</span>,<br />                            <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'object'</span><br />                        <span style=\"font-weight: bold\">}</span>,<br />                        <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'array'</span><br />                    <span style=\"font-weight: bold\">}</span><br />                <span style=\"font-weight: bold\">}</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'required'</span>: <span style=\"font-weight: bold\">[</span><span style=\"color: #008000; text-decoration-color: #008000\">'deliveries'</span><span style=\"font-weight: bold\">]</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'type'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'object'</span><br />            <span style=\"font-weight: bold\">}</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'required'</span>: <span style=\"font-weight: bold\">[</span><span style=\"color: #008000; text-decoration-color: #008000\">'deliveries'</span><span style=\"font-weight: bold\">]</span><br />        <span style=\"font-weight: bold\">}</span><br />    <span style=\"font-weight: bold\">}</span><br /><span style=\"font-weight: bold\">]</span><br /></pre>"}} />


```python
# Add your OPENAI_API_KEY as an environment variable if it's not already set
# import os
# os.environ["OPENAI_API_KEY"] = "YOUR_API_KEY"

response = pydantic_guard(
    model="gpt-4o",
    messages=[{"role": "user", "content": prompt}],
    prompt_params={"chat_history": chat_history},
    tools=pydantic_guard_tools,
    tool_choice="required",
)

print(response)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "/Users/dtam/dev/guardrails/guardrails/validator_service/__init__.py:85: UserWarning: Could not obtain an event loop. Falling back to synchronous validation.<br />      warnings.warn(<br /><br /><br /><br /><br /><pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"color: #800080; text-decoration-color: #800080; font-weight: bold\">ValidationOutcome</span><span style=\"font-weight: bold\">(</span><br />    <span style=\"color: #808000; text-decoration-color: #808000\">call_id</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'13988399296'</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">raw_llm_output</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'{\"deliveries\":[{\"custome_name\":\"nelson and murdock\",\"pickup_time\":\"June 3 </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">10:00am\",\"pickup_location\":\"797 9th Avenue\",\"dropoff_time\":\"June 3 10:30am\",\"dropoff_location\":\"Courthouse, 61 </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">Center Street C/O frank james\",\"price\":\"$23.00\"},{\"custome_name\":\"abc flowers\",\"pickup_time\":\"June 2 </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">11:00am\",\"pickup_location\":\"21 3rd street\",\"dropoff_time\":\"June 2 5:30pm\",\"dropoff_location\":\"75th </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">Ave\",\"price\":\"$14.50\"},{\"custome_name\":\"polk and wardell\",\"pickup_time\":\"June 3 11:00am\",\"pickup_location\":\"331 5th</span><br /><span style=\"color: #008000; text-decoration-color: #008000\">street\",\"dropoff_time\":\"June 3 5:30pm\",\"dropoff_location\":\"75th Ave\",\"price\":\"$34.50\"}]}'</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">validation_summaries</span>=<span style=\"font-weight: bold\">[</span><br />        <span style=\"color: #800080; text-decoration-color: #800080; font-weight: bold\">ValidationSummary</span><span style=\"font-weight: bold\">(</span><br />            <span style=\"color: #808000; text-decoration-color: #808000\">validator_name</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'RegexMatch'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">validator_status</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'fail'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">property_path</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'$.deliveries.0.custome_name'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">failure_reason</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'Result must match ^[A-Z][a-z]+\\s[A-Z][a-z]+$'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">error_spans</span>=<span style=\"color: #800080; text-decoration-color: #800080; font-style: italic\">None</span><br />        <span style=\"font-weight: bold\">)</span>,<br />        <span style=\"color: #800080; text-decoration-color: #800080; font-weight: bold\">ValidationSummary</span><span style=\"font-weight: bold\">(</span><br />            <span style=\"color: #808000; text-decoration-color: #808000\">validator_name</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'RegexMatch'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">validator_status</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'fail'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">property_path</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'$.deliveries.1.custome_name'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">failure_reason</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'Result must match ^[A-Z][a-z]+\\s[A-Z][a-z]+$'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">error_spans</span>=<span style=\"color: #800080; text-decoration-color: #800080; font-style: italic\">None</span><br />        <span style=\"font-weight: bold\">)</span>,<br />        <span style=\"color: #800080; text-decoration-color: #800080; font-weight: bold\">ValidationSummary</span><span style=\"font-weight: bold\">(</span><br />            <span style=\"color: #808000; text-decoration-color: #808000\">validator_name</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'RegexMatch'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">validator_status</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'fail'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">property_path</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'$.deliveries.2.custome_name'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">failure_reason</span>=<span style=\"color: #008000; text-decoration-color: #008000\">'Result must match ^[A-Z][a-z]+\\s[A-Z][a-z]+$'</span>,<br />            <span style=\"color: #808000; text-decoration-color: #808000\">error_spans</span>=<span style=\"color: #800080; text-decoration-color: #800080; font-style: italic\">None</span><br />        <span style=\"font-weight: bold\">)</span><br />    <span style=\"font-weight: bold\">]</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">validated_output</span>=<span style=\"font-weight: bold\">{</span><br />        <span style=\"color: #008000; text-decoration-color: #008000\">'deliveries'</span>: <span style=\"font-weight: bold\">[</span><br />            <span style=\"font-weight: bold\">{</span><br />                <span style=\"color: #008000; text-decoration-color: #008000\">'custome_name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'nelson and murdock'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_time'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'June 3 10:00am'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_location'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'797 9th Avenue'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_time'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'June 3 10:30am'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_location'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Courthouse, 61 Center Street C/O frank james'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'price'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'$23.00'</span><br />            <span style=\"font-weight: bold\">}</span>,<br />            <span style=\"font-weight: bold\">{</span><br />                <span style=\"color: #008000; text-decoration-color: #008000\">'custome_name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'abc flowers'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_time'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'June 2 11:00am'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_location'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'21 3rd street'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_time'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'June 2 5:30pm'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_location'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'75th Ave'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'price'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'$14.50'</span><br />            <span style=\"font-weight: bold\">}</span>,<br />            <span style=\"font-weight: bold\">{</span><br />                <span style=\"color: #008000; text-decoration-color: #008000\">'custome_name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'polk and wardell'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_time'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'June 3 11:00am'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'pickup_location'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'331 5th street'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_time'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'June 3 5:30pm'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'dropoff_location'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'75th Ave'</span>,<br />                <span style=\"color: #008000; text-decoration-color: #008000\">'price'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'$34.50'</span><br />            <span style=\"font-weight: bold\">}</span><br />        <span style=\"font-weight: bold\">]</span><br />    <span style=\"font-weight: bold\">}</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">reask</span>=<span style=\"color: #800080; text-decoration-color: #800080; font-style: italic\">None</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">validation_passed</span>=<span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>,<br />    <span style=\"color: #808000; text-decoration-color: #808000\">error</span>=<span style=\"color: #800080; text-decoration-color: #800080; font-style: italic\">None</span><br /><span style=\"font-weight: bold\">)</span><br /></pre>"}} />


```python
pydantic_guard.history.last.tree
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Logs<br />└── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮<br />    │ <span style=\"background-color: #e7dfeb\">╭─────────────────────────────────────────────── Messages ────────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content                                                                                      </span><span style=\"background-color: #e7dfeb\">┃ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │ user │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ From the chat exchanges below extract a schedule of deliveries.                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Chats:                                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ nelson and murdock: i need a pickup 797 9th Avenue, manila envelope, June 3 10:00am with     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ dropoff 10:30am Courthouse, 61 Center Street C/O frank james                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ operator: quote - $23.00                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ neslon and murdock: perfect, we accept the quote                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ operator: 797 9th ave, 10:00am pickup comfirmed                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ abc flowers: i need a pickup of a flowers from abc flowers at 21 3rd street at 11:00am on    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ june 2 with a dropoff at 75th Ave at 5:30pm same day                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ operator: 21 3rd street flowers quote - $14.50                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ abc flowers: accepted                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ polk and wardell: i need a pickup of a bagels from Bakers Co at 331 5th street at 11:00am on │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ june 3 with a dropoff at 75th Ave at 5:30pm same day                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ operator: 331 5th street bagels quote - $34.50                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ polk and wardell: accepted                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ └──────┴──────────────────────────────────────────────────────────────────────────────────────────────┘ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ {\"deliveries\":[{\"custome_name\":\"nelson and murdock\",\"pickup_time\":\"June 3                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ 10:00am\",\"pickup_location\":\"797 9th Avenue\",\"dropoff_time\":\"June 3                                      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ 10:30am\",\"dropoff_location\":\"Courthouse, 61 Center Street C/O frank                                     │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ james\",\"price\":\"$23.00\"},{\"custome_name\":\"abc flowers\",\"pickup_time\":\"June 2                            │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ 11:00am\",\"pickup_location\":\"21 3rd street\",\"dropoff_time\":\"June 2 5:30pm\",\"dropoff_location\":\"75th      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ Ave\",\"price\":\"$14.50\"},{\"custome_name\":\"polk and wardell\",\"pickup_time\":\"June 3                         │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ 11:00am\",\"pickup_location\":\"331 5th street\",\"dropoff_time\":\"June 3 5:30pm\",\"dropoff_location\":\"75th     │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ Ave\",\"price\":\"$34.50\"}]}                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ {                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     'deliveries': [                                                                                     │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'custome_name': 'nelson and murdock',                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'pickup_time': 'June 3 10:00am',                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'pickup_location': '797 9th Avenue',                                                        │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'dropoff_time': 'June 3 10:30am',                                                           │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'dropoff_location': 'Courthouse, 61 Center Street C/O frank james',                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'price': '$23.00'                                                                           │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'custome_name': 'abc flowers',                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'pickup_time': 'June 2 11:00am',                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'pickup_location': '21 3rd street',                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'dropoff_time': 'June 2 5:30pm',                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'dropoff_location': '75th Ave',                                                             │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'price': '$14.50'                                                                           │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'custome_name': 'polk and wardell',                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'pickup_time': 'June 3 11:00am',                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'pickup_location': '331 5th street',                                                        │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'dropoff_time': 'June 3 5:30pm',                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'dropoff_location': '75th Ave',                                                             │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'price': '$34.50'                                                                           │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         }                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     ]                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ }                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br /></pre>"}} />


