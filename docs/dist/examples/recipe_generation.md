import CodeOutputBlock from '../../code-output-block.jsx';

# Generating Vegan Recipes

!!! note
    To download this example as a Jupyter notebook, click [here](https://github.com/ShreyaR/guardrails/blob/main/docs/src/examples/recipe_generation.ipynb).

In this example, we will use Guardrails to generate vegan mac and cheese recipe.

## Objective

We want to generate a vegan Mac-n-Cheese recipe as a list of ingredients and instructions. We will use Guardrails to make sure the recipe is vegan.

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->


```python
import guardrails as gd
from rich import print
```

<CodeOutputBlock lang="python">

```
    /Users/dtam/.pyenv/versions/3.12.3/envs/litellm/lib/python3.12/site-packages/sentence_transformers/cross_encoder/CrossEncoder.py:13: TqdmExperimentalWarning: Using `tqdm.autonotebook.tqdm` in notebook mode. Use `tqdm.tqdm` instead to force console mode (e.g. in jupyter console)
      from tqdm.autonotebook import tqdm, trange
```

</CodeOutputBlock>

## Step 1: Create the RAIL Spec

Ordinarily, we would create an RAIL spec in a separate file. For the purposes of this example, we will create the spec in this notebook as a string following the RAIL syntax. For more information on RAIL, see the [RAIL documentation](/docs/how_to_guides/rail).  We will also show the same RAIL spec in a code-first format using a Pydantic model.

First we define a custom Validator:


```python
from guardrails.validators import (
    Validator,
    register_validator,
    ValidationResult,
    PassResult,
    FailResult,
)
from typing import Dict, Any

NON_VEGAN_INGREDIENTS = ["butter", "milk", "eggs", "cheese", "cream", "yogurt"]
SUBSTITUTIONS = {
    "butter": "margarine",
    "milk": "soy milk",
    "eggs": "flax eggs",
    "cheese": "vegan cheese",
    "cream": "soy cream",
    "yogurt": "soy yogurt",
}


@register_validator(name="is-vegan", data_type="string")
class IsVegan(Validator):
    def validate(self, value: Any, metadata: Dict) -> ValidationResult:
        global NON_VEGAN_INGREDIENTS, SUBSTITUTIONS

        # Make sure the ingredient is not in the list of non-vegan ingredients.
        if value.lower() in NON_VEGAN_INGREDIENTS:
            return FailResult(
                error_message=f"Value ${value} is not vegan.",
                # Programmatically fix the value by replacing it with a vegan
                # substitute.
                fix_value=SUBSTITUTIONS[value.lower()],
            )

        return PassResult()
```

Next we can define our RAIL spec either as a XML string:


```python
rail_str = """
<rail version="0.1">

<output>
    <list name="ingredients" description="What are the ingredients for the recipe?">
        <object>
            <integer name="index" format="1-indexed" />
            <string name="name" format="is-vegan" on-fail-is-vegan="fix" />
            <string name="brand" description="Suggested brand for the ingredient (if any)" />
            <bool name="optional" description="Is the ingredient necessary?" />
            <float name="quantity" format="units-imperial" />
            <string name="units" format="units-imperial" />
        </object>
    </list>
    <list name="instructions" description="What are the instructions for the recipe?">
        <object>
            <integer name="index" format="1-indexed" />
            <string name="step" />
        </object>
    </list>
</output>

<messages>
<message role="user">
Generate a recipe for vegan mac and cheese.
${gr.complete_xml_suffix}
</message>
</messages>

</rail>
"""
```

or a Pydantic model:


```python
from pydantic import BaseModel, Field
from typing import List


prompt = """
Generate a recipe for vegan mac and cheese.
${gr.complete_xml_suffix}
"""


class Ingredient(BaseModel):
    index: int = Field(validators=[("1-indexed", "noop")])
    name: str = Field(validators=[IsVegan(on_fail="fix")])
    brand: str = Field(description="Suggested brand for the ingredient (if any)")
    optional: bool = Field(description="Is the ingredient necessary?")
    quantity: float = Field(
        description="how much of this ingredient to use",
        validators=[("units-imperial", "noop")],
    )
    units: str = Field(validators=[("units-imperial", "noop")])


class Instruction(BaseModel):
    index: int = Field(validators=[("1-indexed", "noop")])
    step: str


class Recipe(BaseModel):
    ingredients: List[Ingredient] = Field(
        description="What are the ingredients for the recipe?"
    )
    instructions: List[Instruction] = Field(
        description="What are the instructions for the recipe?"
    )
```

!!! note
    Here, we create a custom `IsVegan` validator that checks if the ingredient is vegan.
    We also set `on-fail-is-vegan` to `fix`, which in this case means that programatically we will replace the ingredient with a vegan substitute.

## Step 2: Create a `Guard` object with the RAIL Spec

We create a `gd.Guard` object that will check, validate and correct the output of the LLM. This object:

1. Enforces the quality criteria specified in the RAIL spec.
2. Takes corrective action when the quality criteria are not met.
3. Compiles the schema and type info from the RAIL spec and adds it to the prompt.

From the XML string RAIL spec:


```python
guard = gd.Guard.for_rail_string(rail_str)
```

From the Pydantic model:


```python
guard = gd.Guard.for_pydantic(output_class=Recipe)
```

<CodeOutputBlock lang="python">

```
    /Users/dtam/.pyenv/versions/3.12.1/lib/python3.12/site-packages/sentence_transformers/cross_encoder/CrossEncoder.py:11: TqdmExperimentalWarning: Using `tqdm.autonotebook.tqdm` in notebook mode. Use `tqdm.tqdm` instead to force console mode (e.g. in jupyter console)
      from tqdm.autonotebook import tqdm, trange
    /Users/dtam/.pyenv/versions/3.12.1/lib/python3.12/site-packages/guardrails/validator_base.py:152: UserWarning: Validator with id 1-indexed was not found in the registry!  Ignoring...
      warn(f"Validator with id {name} was not found in the registry!  Ignoring...")
    /Users/dtam/.pyenv/versions/3.12.1/lib/python3.12/site-packages/guardrails/validator_base.py:152: UserWarning: Validator with id units-imperial was not found in the registry!  Ignoring...
      warn(f"Validator with id {name} was not found in the registry!  Ignoring...")
```

</CodeOutputBlock>

As we can see, a few formatters weren't supported. These formatters won't be enforced in the output, but this information can still be used to generate a prompt.

## Step 3: Wrap the LLM API call with `Guard`


```python
# Add your OPENAI_API_KEY as an environment variable if it's not already set
# import os
# os.environ["OPENAI_API_KEY"] = "YOUR_API_KEY"

raw_llm_response, validated_response, *rest = guard(
    messages=[{"role": "user", "content": prompt}],
    max_tokens=2048,
    temperature=0,
    model="gpt-4",
)
```

<CodeOutputBlock lang="python">

```
    /Users/dtam/dev/guardrails/guardrails/validator_service/__init__.py:85: UserWarning: Could not obtain an event loop. Falling back to synchronous validation.
      warnings.warn(
```

</CodeOutputBlock>

We can see the prompt that was sent to the LLM. The `{document}` param was substituted with the user provided value at runtime.


```python
print(guard.history.first.iterations.first.inputs.messages[0]["content"])
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><br />Generate a recipe for vegan mac and cheese.<br /><br />Given below is XML that describes the information to extract from this document and the tags to extract it into.<br /><br /><span style=\"font-weight: bold\">&lt;</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff; font-weight: bold\">output</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">  &lt;list </span><span style=\"color: #808000; text-decoration-color: #808000\">description</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"What are the ingredients for the recipe?\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"ingredients\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">    &lt;object </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;integer </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"1-indexed\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"index\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">integer</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;string </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"is-vegan\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"name\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">string</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;string </span><span style=\"color: #808000; text-decoration-color: #808000\">description</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"Suggested brand for the ingredient (if any)\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"brand\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">string</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;bool </span><span style=\"color: #808000; text-decoration-color: #808000\">description</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"Is the ingredient necessary?\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"optional\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">bool</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;float </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"units-imperial\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"quantity\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">float</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;string </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"units-imperial\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"units\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">string</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">    &lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">object</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">  &lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">list</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">  &lt;list </span><span style=\"color: #808000; text-decoration-color: #808000\">description</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"What are the instructions for the recipe?\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"instructions\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">    &lt;object </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;integer </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"1-indexed\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"index\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">integer</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">      &lt;string </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"step\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">required</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"true\"</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">string</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">    &lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">object</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">  &lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">list</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">output</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;</span><br /><br /><span style=\"color: #000000; text-decoration-color: #000000\">ONLY return a valid JSON object </span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">(</span><span style=\"color: #000000; text-decoration-color: #000000\">no other text is necessary</span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">)</span><span style=\"color: #000000; text-decoration-color: #000000\">, where the key of the field in JSON is the `name` </span><br /><span style=\"color: #000000; text-decoration-color: #000000\">attribute of the corresponding XML, and the value is of the type specified by the corresponding XML's tag. The JSON</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">MUST conform to the XML format, including any types and format requests e.g. requests for lists, objects and </span><br /><span style=\"color: #000000; text-decoration-color: #000000\">specific types. Be correct and concise. If you are unsure anywhere, enter `null`.</span><br /><br /><span style=\"color: #000000; text-decoration-color: #000000\">Here are examples of simple </span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">(</span><span style=\"color: #000000; text-decoration-color: #000000\">XML, JSON</span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">)</span><span style=\"color: #000000; text-decoration-color: #000000\"> pairs that show the expected behavior:</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">- `&lt;string </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">'foo'</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">'two-words lower-case'</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;` =&gt; `</span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'foo'</span><span style=\"color: #000000; text-decoration-color: #000000\">: </span><span style=\"color: #008000; text-decoration-color: #008000\">'example one'</span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">}</span><span style=\"color: #000000; text-decoration-color: #000000\">`</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">- `&lt;list </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">'bar'</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;string </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">'upper-case'</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">list</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;` =&gt; `</span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">\"bar\"</span><span style=\"color: #000000; text-decoration-color: #000000\">: </span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">[</span><span style=\"color: #008000; text-decoration-color: #008000\">'STRING ONE'</span><span style=\"color: #000000; text-decoration-color: #000000\">, </span><span style=\"color: #008000; text-decoration-color: #008000\">'STRING TWO'</span><span style=\"color: #000000; text-decoration-color: #000000\">, etc.</span><span style=\"color: #000000; text-decoration-color: #000000; font-weight: bold\">]}</span><span style=\"color: #000000; text-decoration-color: #000000\">`</span><br /><span style=\"color: #000000; text-decoration-color: #000000\">- `&lt;object </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">'baz'</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;string </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"foo\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"capitalize two-words\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;integer </span><span style=\"color: #808000; text-decoration-color: #808000\">name</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"index\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><span style=\"color: #808000; text-decoration-color: #808000\">format</span><span style=\"color: #000000; text-decoration-color: #000000\">=</span><span style=\"color: #008000; text-decoration-color: #008000\">\"1-indexed\"</span><span style=\"color: #000000; text-decoration-color: #000000\"> </span><br /><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;&lt;</span><span style=\"color: #800080; text-decoration-color: #800080\">/</span><span style=\"color: #ff00ff; text-decoration-color: #ff00ff\">object</span><span style=\"color: #000000; text-decoration-color: #000000\">&gt;` =</span><span style=\"font-weight: bold\">&gt;</span> `<span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'baz'</span>: <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'foo'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Some String'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1</span><span style=\"font-weight: bold\">}}</span>`<br /><br /><br /></pre>"}} />

The `guard` wrapper returns the raw_llm_respose (which is a simple string), and the validated and corrected output (which is a dictionary).

We can see that the output is a dictionary with the correct schema and types.


```python
print(validated_response)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"><span style=\"font-weight: bold\">{</span><br />    <span style=\"color: #008000; text-decoration-color: #008000\">'ingredients'</span>: <span style=\"font-weight: bold\">[</span><br />        <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'macaroni'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Barilla'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">8.0</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'ounces'</span><br />        <span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'raw cashews'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">\"Trader Joe's\"</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1.0</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'cup'</span><br />        <span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'nutritional yeast'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">\"Bob's Red Mill\"</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.25</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'cup'</span><br />        <span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'garlic powder'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'McCormick'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1.0</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'teaspoon'</span><br />        <span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">5</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'onion powder'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'McCormick'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1.0</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'teaspoon'</span><br />        <span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">6</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'turmeric'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Simply Organic'</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #00ff00; text-decoration-color: #00ff00; font-style: italic\">True</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.5</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'teaspoon'</span><br />        <span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">7</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'salt'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Morton'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1.0</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'teaspoon'</span><span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">8</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'name'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'water'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'brand'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Generic'</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'optional'</span>: <span style=\"color: #ff0000; text-decoration-color: #ff0000; font-style: italic\">False</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'quantity'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1.5</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'units'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'cups'</span><span style=\"font-weight: bold\">}</span><br />    <span style=\"font-weight: bold\">]</span>,<br />    <span style=\"color: #008000; text-decoration-color: #008000\">'instructions'</span>: <span style=\"font-weight: bold\">[</span><br />        <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'step'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Soak the cashews in water for at least 2 hours, then drain.'</span><span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'step'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Cook the macaroni according to the package instructions, then drain.'</span><span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><br />            <span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3</span>,<br />            <span style=\"color: #008000; text-decoration-color: #008000\">'step'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'In a blender, combine the soaked cashews, nutritional yeast, garlic powder, onion powder, </span><br /><span style=\"color: #008000; text-decoration-color: #008000\">turmeric, salt, and water. Blend until smooth.'</span><br />        <span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'step'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Pour the sauce over the cooked macaroni and stir until well coated.'</span><span style=\"font-weight: bold\">}</span>,<br />        <span style=\"font-weight: bold\">{</span><span style=\"color: #008000; text-decoration-color: #008000\">'index'</span>: <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">5</span>, <span style=\"color: #008000; text-decoration-color: #008000\">'step'</span>: <span style=\"color: #008000; text-decoration-color: #008000\">'Serve the vegan mac and cheese hot.'</span><span style=\"font-weight: bold\">}</span><br />    <span style=\"font-weight: bold\">]</span><br /><span style=\"font-weight: bold\">}</span><br /></pre>"}} />


```python
print(guard.history.last.tree)
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Logs<br />├── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮<br />│   │ <span style=\"background-color: #e7dfeb\">╭─────────────────────────────────────────────── Messages ────────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content                                                                                      </span><span style=\"background-color: #e7dfeb\">┃ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │ user │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Generate a recipe for vegan mac and cheese.                                                  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Given below is XML that describes the information to extract from this document and the tags │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ to extract it into.                                                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ &lt;output&gt;                                                                                     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │   &lt;list description=\"What are the ingredients for the recipe?\" name=\"ingredients\"            │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ required=\"true\"&gt;                                                                             │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │     &lt;object required=\"true\"&gt;                                                                 │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;integer format=\"1-indexed\" name=\"index\" required=\"true\"&gt;&lt;/integer&gt;                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;string format=\"is-vegan\" name=\"name\" required=\"true\"&gt;&lt;/string&gt;                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;string description=\"Suggested brand for the ingredient (if any)\" name=\"brand\"         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ required=\"true\"&gt;&lt;/string&gt;                                                                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;bool description=\"Is the ingredient necessary?\" name=\"optional\"                       │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ required=\"true\"&gt;&lt;/bool&gt;                                                                      │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;float format=\"units-imperial\" name=\"quantity\" required=\"true\"&gt;&lt;/float&gt;                │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;string format=\"units-imperial\" name=\"units\" required=\"true\"&gt;&lt;/string&gt;                 │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │     &lt;/object&gt;                                                                                │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │   &lt;/list&gt;                                                                                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │   &lt;list description=\"What are the instructions for the recipe?\" name=\"instructions\"          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ required=\"true\"&gt;                                                                             │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │     &lt;object required=\"true\"&gt;                                                                 │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;integer format=\"1-indexed\" name=\"index\" required=\"true\"&gt;&lt;/integer&gt;                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │       &lt;string name=\"step\" required=\"true\"&gt;&lt;/string&gt;                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │     &lt;/object&gt;                                                                                │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │   &lt;/list&gt;                                                                                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ &lt;/output&gt;                                                                                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ ONLY return a valid JSON object (no other text is necessary), where the key of the field in  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ JSON is the `name` attribute of the corresponding XML, and the value is of the type          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ specified by the corresponding XML's tag. The JSON MUST conform to the XML format, including │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ any types and format requests e.g. requests for lists, objects and specific types. Be        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ correct and concise. If you are unsure anywhere, enter `null`.                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Here are examples of simple (XML, JSON) pairs that show the expected behavior:               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE',        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ 'STRING TWO', etc.]}`                                                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer            │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ name=\"index\" format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index':     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ 1}}`                                                                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ └──────┴──────────────────────────────────────────────────────────────────────────────────────────────┘ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ {                                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│   \"ingredients\": [                                                                                      │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 1,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"macaroni\",                                                                               │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Barilla\",                                                                               │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 8.0,                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"ounces\"                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 2,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"raw cashews\",                                                                            │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Trader Joe's\",                                                                          │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"cup\"                                                                                    │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 3,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"nutritional yeast\",                                                                      │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Bob's Red Mill\",                                                                        │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 0.25,                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"cup\"                                                                                    │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 4,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"garlic powder\",                                                                          │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"McCormick\",                                                                             │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 5,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"onion powder\",                                                                           │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"McCormick\",                                                                             │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 6,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"turmeric\",                                                                               │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Simply Organic\",                                                                        │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": true,                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 0.5,                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 7,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"salt\",                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Morton\",                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 8,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"water\",                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"brand\": null,                                                                                    │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.5,                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"cups\"                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     }                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│   ],                                                                                                    │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│   \"instructions\": [                                                                                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 1,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Soak the cashews in water for at least 2 hours, then drain.\"                             │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 2,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Cook the macaroni according to the package instructions, then drain.\"                    │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 3,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"In a blender, combine the soaked cashews, nutritional yeast, garlic powder, onion        │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ powder, turmeric, salt, and water. Blend until smooth.\"                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 4,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Pour the sauce over the cooked macaroni and stir until well coated.\"                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"index\": 5,                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Serve the vegan mac and cheese hot.\"                                                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│     }                                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│   ]                                                                                                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ }                                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ SkeletonReAsk(                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     incorrect_value={                                                                                   │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         'ingredients': [                                                                                │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 1,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'macaroni',                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': 'Barilla',                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': False,                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 8.0,                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'ounces'                                                                       │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 2,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'raw cashews',                                                                  │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': \"Trader Joe's\",                                                                │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': False,                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 1.0,                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'cup'                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 3,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'nutritional yeast',                                                            │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': \"Bob's Red Mill\",                                                              │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': False,                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 0.25,                                                                       │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'cup'                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 4,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'garlic powder',                                                                │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': 'McCormick',                                                                   │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': False,                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 1.0,                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'teaspoon'                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 5,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'onion powder',                                                                 │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': 'McCormick',                                                                   │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': False,                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 1.0,                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'teaspoon'                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 6,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'turmeric',                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': 'Simply Organic',                                                              │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': True,                                                                       │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 0.5,                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'teaspoon'                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 7,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'salt',                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': 'Morton',                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': False,                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 1.0,                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'teaspoon'                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 8,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'name': 'water',                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'brand': None,                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'optional': False,                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'quantity': 1.5,                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'units': 'cups'                                                                         │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             }                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         ],                                                                                              │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         'instructions': [                                                                               │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 1,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'step': 'Soak the cashews in water for at least 2 hours, then drain.'                   │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 2,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'step': 'Cook the macaroni according to the package instructions, then drain.'          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 3,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'step': 'In a blender, combine the soaked cashews, nutritional yeast, garlic powder,    │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ onion powder, turmeric, salt, and water. Blend until smooth.'                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {                                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'index': 4,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│                 'step': 'Pour the sauce over the cooked macaroni and stir until well coated.'           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             },                                                                                          │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             {'index': 5, 'step': 'Serve the vegan mac and cheese hot.'}                                 │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         ]                                                                                               │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     },                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     fail_results=[                                                                                      │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         FailResult(                                                                                     │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             outcome='fail',                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             error_message='JSON does not match schema:\n{\n  \"$.ingredients[7].brand\": [\n    \"None is  │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ not of type &lt;SimpleTypes.STRING: \'string\'&gt;\"\n  ]\n}',                                                 │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             fix_value=None,                                                                             │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             error_spans=None,                                                                           │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             metadata=None,                                                                              │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│             validated_chunk=None                                                                        │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│         )                                                                                               │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     ],                                                                                                  │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│     additional_properties={}                                                                            │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ )                                                                                                       │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br />└── ╭────────────────────────────────────────────────── Step 1 ───────────────────────────────────────────────────╮<br />    │ <span style=\"background-color: #e7dfeb\">╭─────────────────────────────────────────────── Messages ────────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\">   Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content                                                                                    </span><span style=\"background-color: #e7dfeb\">┃ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │ system │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ You are a helpful assistant only capable of communicating with valid JSON, and no other    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ text.                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ ONLY return a valid JSON object (no other text is necessary), where the key of the field   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ in JSON is the `name` attribute of the corresponding XML, and the value is of the type     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ specified by the corresponding XML's tag. The JSON MUST conform to the XML format,         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ including any types and format requests e.g. requests for lists, objects and specific      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ types. Be correct and concise. If you are unsure anywhere, enter `null`.                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Here are examples of simple (XML, JSON) pairs that show the expected behavior:             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE',      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ 'STRING TWO', etc.]}`                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ name=\"index\" format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index':   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ 1}}`                                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ├────────┼────────────────────────────────────────────────────────────────────────────────────────────┤ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │   user │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ I was given the following JSON response, which had problems due to incorrect values.       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ {                                                                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   \"incorrect_value\": {                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     \"ingredients\": [                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 1,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"macaroni\",                                                                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": \"Barilla\",                                                                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": false,                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 8.0,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"ounces\"                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 2,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"raw cashews\",                                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": \"Trader Joe's\",                                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": false,                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 1.0,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"cup\"                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 3,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"nutritional yeast\",                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": \"Bob's Red Mill\",                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": false,                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 0.25,                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"cup\"                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 4,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"garlic powder\",                                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": \"McCormick\",                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": false,                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 1.0,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"teaspoon\"                                                                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 5,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"onion powder\",                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": \"McCormick\",                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": false,                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 1.0,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"teaspoon\"                                                                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 6,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"turmeric\",                                                                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": \"Simply Organic\",                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": true,                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 0.5,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"teaspoon\"                                                                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 7,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"salt\",                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": \"Morton\",                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": false,                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 1.0,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"teaspoon\"                                                                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 8,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"name\": \"water\",                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"brand\": null,                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"optional\": false,                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"quantity\": 1.5,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"units\": \"cups\"                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       }                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     ],                                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     \"instructions\": [                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 1,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"step\": \"Soak the cashews in water for at least 2 hours, then drain.\"              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 2,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"step\": \"Cook the macaroni according to the package instructions, then drain.\"     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 3,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"step\": \"In a blender, combine the soaked cashews, nutritional yeast, garlic       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ powder, onion powder, turmeric, salt, and water. Blend until smooth.\"                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 4,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"step\": \"Pour the sauce over the cooked macaroni and stir until well coated.\"      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       },                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       {                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"index\": 5,                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │         \"step\": \"Serve the vegan mac and cheese hot.\"                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       }                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     ]                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   },                                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   \"error_messages\": [                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     \"JSON does not match schema:\n{\n  \"$.ingredients[7].brand\": [\n    \"None is not of │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ type &lt;SimpleTypes.STRING: 'string'&gt;\"\n  ]\n}\"                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   ]                                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ }                                                                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Help me correct the incorrect values based on the given error messages.                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Given below is XML that describes the information to extract from this document and the    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ tags to extract it into.                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ &lt;output&gt;                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   &lt;list description=\"What are the ingredients for the recipe?\" name=\"ingredients\"          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ required=\"true\"&gt;                                                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     &lt;object required=\"true\"&gt;                                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;integer format=\"1-indexed\" name=\"index\" required=\"true\"&gt;&lt;/integer&gt;                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;string format=\"is-vegan\" name=\"name\" required=\"true\"&gt;&lt;/string&gt;                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;string description=\"Suggested brand for the ingredient (if any)\" name=\"brand\"       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ required=\"true\"&gt;&lt;/string&gt;                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;bool description=\"Is the ingredient necessary?\" name=\"optional\"                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ required=\"true\"&gt;&lt;/bool&gt;                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;float format=\"units-imperial\" name=\"quantity\" required=\"true\"&gt;&lt;/float&gt;              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;string format=\"units-imperial\" name=\"units\" required=\"true\"&gt;&lt;/string&gt;               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     &lt;/object&gt;                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   &lt;/list&gt;                                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   &lt;list description=\"What are the instructions for the recipe?\" name=\"instructions\"        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ required=\"true\"&gt;                                                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     &lt;object required=\"true\"&gt;                                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;integer format=\"1-indexed\" name=\"index\" required=\"true\"&gt;&lt;/integer&gt;                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       &lt;string name=\"step\" required=\"true\"&gt;&lt;/string&gt;                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     &lt;/object&gt;                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   &lt;/list&gt;                                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ &lt;/output&gt;                                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ ONLY return a valid JSON object (no other text is necessary), where the key of the field   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ in JSON is the `name` attribute of the corresponding XML, and the value is of the type     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ specified by the corresponding XML's tag. The JSON MUST conform to the XML format,         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ including any types and format requests e.g. requests for lists, objects and specific      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ types. Be correct and concise. If you are unsure anywhere, enter `null`.                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Here's an example of the structure:                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ {                                                                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   \"ingredients\": [                                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     {                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"index\": 19,                                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"name\": \"Crystal Day\",                                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"brand\": \"cut\",                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"optional\": false,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"quantity\": 37.0,                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"units\": \"simple\"                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     },                                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     {                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"index\": 58,                                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"name\": \"Derek Harris\",                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"brand\": \"suggest\",                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"optional\": false,                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"quantity\": 29.0,                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"units\": \"three\"                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     }                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   ],                                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   \"instructions\": [                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     {                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"index\": 80,                                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"step\": \"road\"                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     },                                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     {                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"index\": 24,                                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │       \"step\": \"law\"                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │     }                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   ]                                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ }                                                                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ └────────┴────────────────────────────────────────────────────────────────────────────────────────────┘ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ {                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│   \"ingredients\": [                                                                                      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 1,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"macaroni\",                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Barilla\",                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 8.0,                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"ounces\"                                                                                 │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 2,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"raw cashews\",                                                                            │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Trader Joe's\",                                                                          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"cup\"                                                                                    │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 3,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"nutritional yeast\",                                                                      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Bob's Red Mill\",                                                                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 0.25,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"cup\"                                                                                    │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 4,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"garlic powder\",                                                                          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"McCormick\",                                                                             │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 5,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"onion powder\",                                                                           │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"McCormick\",                                                                             │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 6,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"turmeric\",                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Simply Organic\",                                                                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": true,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 0.5,                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 7,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"salt\",                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Morton\",                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.0,                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"teaspoon\"                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 8,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"name\": \"water\",                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"brand\": \"Generic\",                                                                               │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"optional\": false,                                                                                │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"quantity\": 1.5,                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"units\": \"cups\"                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     }                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│   ],                                                                                                    │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│   \"instructions\": [                                                                                     │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 1,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Soak the cashews in water for at least 2 hours, then drain.\"                             │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 2,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Cook the macaroni according to the package instructions, then drain.\"                    │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 3,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"In a blender, combine the soaked cashews, nutritional yeast, garlic powder, onion        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ powder, turmeric, salt, and water. Blend until smooth.\"                                                 │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 4,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Pour the sauce over the cooked macaroni and stir until well coated.\"                     │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     },                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     {                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"index\": 5,                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│       \"step\": \"Serve the vegan mac and cheese hot.\"                                                     │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│     }                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│   ]                                                                                                     │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ }                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ {                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     'ingredients': [                                                                                    │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 1,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'macaroni',                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': 'Barilla',                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': False,                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 8.0,                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'ounces'                                                                           │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 2,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'raw cashews',                                                                      │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': \"Trader Joe's\",                                                                    │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': False,                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 1.0,                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'cup'                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 3,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'nutritional yeast',                                                                │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': \"Bob's Red Mill\",                                                                  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': False,                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 0.25,                                                                           │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'cup'                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 4,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'garlic powder',                                                                    │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': 'McCormick',                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': False,                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 1.0,                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'teaspoon'                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 5,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'onion powder',                                                                     │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': 'McCormick',                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': False,                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 1.0,                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'teaspoon'                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 6,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'turmeric',                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': 'Simply Organic',                                                                  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': True,                                                                           │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 0.5,                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'teaspoon'                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 7,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'salt',                                                                             │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': 'Morton',                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': False,                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 1.0,                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'teaspoon'                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 8,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'name': 'water',                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'brand': 'Generic',                                                                         │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'optional': False,                                                                          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'quantity': 1.5,                                                                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'units': 'cups'                                                                             │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         }                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     ],                                                                                                  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     'instructions': [                                                                                   │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 1,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'step': 'Soak the cashews in water for at least 2 hours, then drain.'                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 2,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'step': 'Cook the macaroni according to the package instructions, then drain.'              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 3,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'step': 'In a blender, combine the soaked cashews, nutritional yeast, garlic powder, onion  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ powder, turmeric, salt, and water. Blend until smooth.'                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {                                                                                               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'index': 4,                                                                                 │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│             'step': 'Pour the sauce over the cooked macaroni and stir until well coated.'               │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         },                                                                                              │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│         {'index': 5, 'step': 'Serve the vegan mac and cheese hot.'}                                     │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     ]                                                                                                   │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ }                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br /></pre>"}} />
