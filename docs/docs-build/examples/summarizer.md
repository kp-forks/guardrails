import CodeOutputBlock from '../../docusaurus/code-output-block.jsx';

# Summarizer

In this example we will use Guardrails to summarize text in terms of length, quality and output read time.

!!! note
    To download this example as a Jupyter notebook, click [here](https://github.com/ShreyaR/guardrails/blob/main/docs/examples/summarization.ipynb).

In this example, we will use Guardrails in the summarization of a text document. We will check whether the summarized document has a high semantic similarity with the original document. We will ensure the ouptput meets a certain range of length and read time.

## Setup
In order to check semantic similarity we will need the `numpy` package via the command below. We will also install the validators we indtend to use.

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->


```bash
guardrails hub install hub://guardrails/reading_time --quiet --install-local-models
 guardrails hub install hub://guardrails/similar_to_document --quiet --install-local-models
 guardrails hub install hub://guardrails/valid_length --quiet --install-local-models
```

<CodeOutputBlock lang="bash">

```
    Note: you may need to restart the kernel to use updated packages.
    Installing hub://guardrails/reading_time...
    ✅Successfully installed guardrails/reading_time!
    
    
    Installing hub://guardrails/similar_to_document...
    ✅Successfully installed guardrails/similar_to_document!
    
    
    Installing hub://guardrails/valid_length...
    ✅Successfully installed guardrails/valid_length!
    
    
```

</CodeOutputBlock>

## Step 1: Load data and create Pydantic Model

Load our text with the code below


```python
with open("data/twain.txt", "r") as file:
    document = file.read()
    file.seek(0)
    content = "".join(line.strip() for line in file.readlines())
```

Next we can define our return output with a pydantic model


```python
from pydantic import BaseModel, Field

from guardrails.hub import SimilarToDocument, ValidLength, ReadingTime

prompt = """
Summarize the following text faithfully:

${document}

${gr.complete_xml_suffix}
"""

THREE_MINUTES = 180 / 60


class TextSummary(BaseModel):
    summary: str = Field(
        description="Faithful summary of the text",
        validators=[
            ReadingTime(reading_time=THREE_MINUTES, on_fail="exception"),
            ValidLength(min=100, max=1000, on_fail="exception"),
            SimilarToDocument(
                document=f"'{content}'", threshold=0.60, on_fail="filter"
            ),
        ],
    )
```

<CodeOutputBlock lang="python">

```
    /Users/dtam/.pyenv/versions/3.12.3/envs/litellm/lib/python3.12/site-packages/sentence_transformers/cross_encoder/CrossEncoder.py:13: TqdmExperimentalWarning: Using `tqdm.autonotebook.tqdm` in notebook mode. Use `tqdm.tqdm` instead to force console mode (e.g. in jupyter console)
      from tqdm.autonotebook import tqdm, trange


    Loading the model all-MiniLM-L6-v2. This may take a while...
```

</CodeOutputBlock>

## Step 2 Create Guard from pydantic

The guard we create will:
1. Enforce reading time
2. Enforce length
3. Enforce similarity


```python
import guardrails as gd

guard = gd.Guard().for_pydantic(TextSummary)
```

## Step 3: Call LLM via `guard(`

We use the tools api to ensure our data is returned in a structured form. 



```python
# TODO: Replace OPENAI_API_KEY with your OpenAI API key, uncomment
# os.environ["OPENAI_API_KEY"] = "OPENAI_API_KEY"

response = guard(
    messages=[{"role": "user", "content": prompt}],
    prompt_params={"document": document},
    model="gpt-4o",
    tools=guard.json_function_calling_tool(),
    tool_choice="required",
)

print(f"Validated Output: {response.validated_output}")
```

<CodeOutputBlock lang="python">

```
    /Users/dtam/dev/guardrails/guardrails/validator_service/__init__.py:85: UserWarning: Could not obtain an event loop. Falling back to synchronous validation.
      warnings.warn(


    Similarity: 0.818, Type: <class 'float'>
    Validated Output: {'summary': "Mark Twain discusses the art of storytelling, focusing on the humorous story, which he considers an American development. He contrasts it with the comic story, which is English, and the witty story, which is French. The humorous story relies on the manner of telling, allowing for length and meandering, while comic and witty stories depend on content and must be brief with a clear point. Twain emphasizes that telling a humorous story is a high art, requiring skill, unlike the comic and witty stories that anyone can tell. The humorous story is delivered gravely, with the teller pretending not to know it's funny, whereas the comic story is told with enthusiasm and obviousness. Twain notes that the humorous story often ends with a subtle point, requiring the audience's attention, a technique used by storytellers like Artemus Ward and others. In contrast, the comic story's punchline is emphasized and often exaggerated in print, which Twain finds disheartening."}
```

</CodeOutputBlock>

We can see the step-wise history of the `Guard` object below:


```python
guard.history.last.tree
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Logs<br />└── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮<br />    │ <span style=\"background-color: #e7dfeb\">╭─────────────────────────────────────────────── Messages ────────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content                                                                                      </span><span style=\"background-color: #e7dfeb\">┃ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │ user │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Summarize the following text faithfully:                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ The Humorous Story an American Development.— Its                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Difference from Comic and Witty Stories.                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ DO not claim that I can tell a story as it ought to                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ be told. I only claim to know how a story                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ ought to be told, for I have been almost daily in the                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ company of the most expert story-tellers for many                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ years.                                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ There are several kinds of stories, but only one                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ difficult kind —the humorous. I will talk mainly                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ about that one. The humorous story is American,                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ the comic story is English, the witty story is French.                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story depends for its effect upon the                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ manner of the telling; the comic story and the witty                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ story upon the matter.                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story may be spun out to great                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ length, and may wander around as much as it                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ pleases, and arrive nowhere in particular; but the                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ comic and witty stories must be brief and end with                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ a point. The humorous story bubbles gently along,                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ the others burst.                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story is strictly a work of art —                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ high and delicate art — and only an artist can tell it;                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ but no art is necessary in telling the comic and the                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ witty story; anybody can do it. The art of telling                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ a humorous story — understand, I mean by word of                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ mouth, not print — was created in America, and                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ has remained at home.                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story is told gravely; the teller                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ does his best to conceal the fact that he even dimly                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ suspects that there is anything funny about it; but                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ the teller of the comic story tells you beforehand                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ that it is one of the funniest things he has ever                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ heard, then tells it with eager delight, and is the                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ first person to laugh when he gets through. And                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ sometimes, if he has had good success, he is so glad                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ and happy that he will repeat the ‘‘ nub’’ of it and                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ slance around from face to face, collecting applause,                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ and then repeat it again. It is a pathetic thing to                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ see.                                                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Very often, of course, the rambling and disjointed                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ humorous story finishes with a nub, point, snapper,                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ or whatever you like to call it. Then the listener                                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ must be alert, for in many cases the teller will divert                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ attention from that nub by dropping it in a carefully.                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ casual and indifferent way, with the pretence that he                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ does not know it is a nub.                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Artemus Ward used that trick a good deal; then                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ when the belated audience presently caught the joke                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ he would look up with innocent surprise, as if                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ wondering what they had found to laugh at. Dan                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Setchell used it before him, Nye and Riley and                                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ others use it to-day.                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ But the teller of the comic story does not slur                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ the nub; he shouts it at you—every time. And                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ when he prints it, in England, France, Germany,                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ and Italy, he italicizes it, puts some whooping                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ exclamation-points after it, and sometimes explains                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ it in a parenthesis. All of which is very depressing,                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ and makes one want to renounce joking and lead a                                             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ better life.                                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ - Mark Twain                                                                                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Given below is XML that describes the information to extract from this document and the tags │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ to extract it into.                                                                          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ &lt;output&gt;                                                                                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │   &lt;string description=\"Faithful summary of the text\" format=\"guardrails/reading_time: 3.0;   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ guardrails/valid_length: 100 1000; guardrails/similar_to_document: 'The Humorous Story an    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ American Development.— ItsDifference from Comic and Witty Stories.DO not claim that I can    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ tell a story as it ought tobe told. I only claim to know how a storyought to be told, for I  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ have been almost daily in thecompany of the most expert story-tellers for manyyears.There    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ are several kinds of stories, but only onedifficult kind —the humorous. I will talk          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ mainlyabout that one. The humorous story is American,the comic story is English, the witty   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ story is French.The humorous story depends for its effect upon themanner of the telling; the │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ comic story and the wittystory upon the matter.The humorous story may be spun out to         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ greatlength, and may wander around as much as itpleases, and arrive nowhere in particular;   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ but thecomic and witty stories must be brief and end witha point. The humorous story bubbles │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ gently along,the others burst.The humorous story is strictly a work of art —high and         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ delicate art — and only an artist can tell it;but no art is necessary in telling the comic   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ and thewitty story; anybody can do it. The art of tellinga humorous story — understand, I    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ mean by word ofmouth, not print — was created in America, andhas remained at home.The        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ humorous story is told gravely; the tellerdoes his best to conceal the fact that he even     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ dimlysuspects that there is anything funny about it; butthe teller of the comic story tells  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ you beforehandthat it is one of the funniest things he has everheard, then tells it with     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ eager delight, and is thefirst person to laugh when he gets through. Andsometimes, if he has │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ had good success, he is so gladand happy that he will repeat the ‘‘ nub’’ of it andslance    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ around from face to face, collecting applause,and then repeat it again. It is a pathetic     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ thing tosee.Very often, of course, the rambling and disjointedhumorous story finishes with a │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ nub, point, snapper,or whatever you like to call it. Then the listenermust be alert, for in  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ many cases the teller will divertattention from that nub by dropping it in a                 │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ carefully.casual and indifferent way, with the pretence that hedoes not know it is a         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ nub.Artemus Ward used that trick a good deal; thenwhen the belated audience presently caught │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ the jokehe would look up with innocent surprise, as ifwondering what they had found to laugh │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ at. DanSetchell used it before him, Nye and Riley andothers use it to-day.But the teller of  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ the comic story does not slurthe nub; he shouts it at you—every time. Andwhen he prints it,  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ in England, France, Germany,and Italy, he italicizes it, puts some                           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ whoopingexclamation-points after it, and sometimes explainsit in a parenthesis. All of which │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ is very depressing,and makes one want to renounce joking and lead abetter life.- Mark Twain' │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ 0.6 all-MiniLM-L6-v2\" name=\"summary\" required=\"true\"&gt;&lt;/string&gt;                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ &lt;/output&gt;                                                                                    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ ONLY return a valid JSON object (no other text is necessary), where the key of the field in  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ JSON is the `name` attribute of the corresponding XML, and the value is of the type          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ specified by the corresponding XML's tag. The JSON MUST conform to the XML format, including │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ any types and format requests e.g. requests for lists, objects and specific types. Be        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ correct and concise. If you are unsure anywhere, enter `null`.                               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ Here are examples of simple (XML, JSON) pairs that show the expected behavior:               │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE',        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ 'STRING TWO', etc.]}`                                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ name=\"index\" format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index':     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │ 1}}`                                                                                         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ └──────┴──────────────────────────────────────────────────────────────────────────────────────────────┘ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ {\"summary\":\"Mark Twain discusses the art of storytelling, focusing on the humorous story, which he      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ considers an American development. He contrasts it with the comic story, which is English, and the      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ witty story, which is French. The humorous story relies on the manner of telling, allowing for length   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ and meandering, while comic and witty stories depend on content and must be brief with a clear point.   │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ Twain emphasizes that telling a humorous story is a high art, requiring skill, unlike the comic and     │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ witty stories that anyone can tell. The humorous story is delivered gravely, with the teller pretending │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ not to know it's funny, whereas the comic story is told with enthusiasm and obviousness. Twain notes    │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ that the humorous story often ends with a subtle point, requiring the audience's attention, a technique │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ used by storytellers like Artemus Ward and others. In contrast, the comic story's punchline is          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ emphasized and often exaggerated in print, which Twain finds disheartening.\"}                           │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ {                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│     'summary': \"Mark Twain discusses the art of storytelling, focusing on the humorous story, which he  │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ considers an American development. He contrasts it with the comic story, which is English, and the      │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ witty story, which is French. The humorous story relies on the manner of telling, allowing for length   │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ and meandering, while comic and witty stories depend on content and must be brief with a clear point.   │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ Twain emphasizes that telling a humorous story is a high art, requiring skill, unlike the comic and     │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ witty stories that anyone can tell. The humorous story is delivered gravely, with the teller pretending │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ not to know it's funny, whereas the comic story is told with enthusiasm and obviousness. Twain notes    │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ that the humorous story often ends with a subtle point, requiring the audience's attention, a technique │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ used by storytellers like Artemus Ward and others. In contrast, the comic story's punchline is          │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ emphasized and often exaggerated in print, which Twain finds disheartening.\"                            │</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ }                                                                                                       │</span> │<br />    │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br /></pre>"}} />

The `guard` wrapper returns the raw_llm_respose (which is a simple string), and the validated and corrected output (which is a dictionary). We can see that the output is a dictionary with the correct schema and types.

Now lets try a model thats not as proficent at summarization and we can see the ouptput is filtered and validation has failed.

The final validated output is `None` due to the failed validation.


```python
response = guard(
    messages=[{"role": "user", "content": prompt}],
    prompt_params={"document": document},
    model="babbage-002",
    max_tokens=512,
    temperature=0,
)

print(f"Validated Output: {response.validated_output}")
```

<CodeOutputBlock lang="python">

```
    Validated Output: None
```

</CodeOutputBlock>

We can see the step wise history of the guard execution below:


```python
guard.history.last.tree
```
    
<CodeOutputBlock dangerouslySetInnerHTML={{ __html: "<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Logs<br />├── ╭────────────────────────────────────────────────── Step 0 ───────────────────────────────────────────────────╮<br />│   │ <span style=\"background-color: #e7dfeb\">╭─────────────────────────────────────────────── Messages ────────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content                                                                                      </span><span style=\"background-color: #e7dfeb\">┃ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │ user │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Summarize the following text faithfully:                                                     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ The Humorous Story an American Development.— Its                                             │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Difference from Comic and Witty Stories.                                                     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ DO not claim that I can tell a story as it ought to                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ be told. I only claim to know how a story                                                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ ought to be told, for I have been almost daily in the                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ company of the most expert story-tellers for many                                            │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ years.                                                                                       │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ There are several kinds of stories, but only one                                             │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ difficult kind —the humorous. I will talk mainly                                             │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ about that one. The humorous story is American,                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ the comic story is English, the witty story is French.                                       │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story depends for its effect upon the                                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ manner of the telling; the comic story and the witty                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ story upon the matter.                                                                       │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story may be spun out to great                                                  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ length, and may wander around as much as it                                                  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ pleases, and arrive nowhere in particular; but the                                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ comic and witty stories must be brief and end with                                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ a point. The humorous story bubbles gently along,                                            │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ the others burst.                                                                            │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story is strictly a work of art —                                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ high and delicate art — and only an artist can tell it;                                      │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ but no art is necessary in telling the comic and the                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ witty story; anybody can do it. The art of telling                                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ a humorous story — understand, I mean by word of                                             │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ mouth, not print — was created in America, and                                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ has remained at home.                                                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ The humorous story is told gravely; the teller                                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ does his best to conceal the fact that he even dimly                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ suspects that there is anything funny about it; but                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ the teller of the comic story tells you beforehand                                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ that it is one of the funniest things he has ever                                            │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ heard, then tells it with eager delight, and is the                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ first person to laugh when he gets through. And                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ sometimes, if he has had good success, he is so glad                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ and happy that he will repeat the ‘‘ nub’’ of it and                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ slance around from face to face, collecting applause,                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ and then repeat it again. It is a pathetic thing to                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ see.                                                                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Very often, of course, the rambling and disjointed                                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ humorous story finishes with a nub, point, snapper,                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ or whatever you like to call it. Then the listener                                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ must be alert, for in many cases the teller will divert                                      │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ attention from that nub by dropping it in a carefully.                                       │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ casual and indifferent way, with the pretence that he                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ does not know it is a nub.                                                                   │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Artemus Ward used that trick a good deal; then                                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ when the belated audience presently caught the joke                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ he would look up with innocent surprise, as if                                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ wondering what they had found to laugh at. Dan                                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Setchell used it before him, Nye and Riley and                                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ others use it to-day.                                                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ But the teller of the comic story does not slur                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ the nub; he shouts it at you—every time. And                                                 │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ when he prints it, in England, France, Germany,                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ and Italy, he italicizes it, puts some whooping                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ exclamation-points after it, and sometimes explains                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ it in a parenthesis. All of which is very depressing,                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ and makes one want to renounce joking and lead a                                             │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ better life.                                                                                 │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ - Mark Twain                                                                                 │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Given below is XML that describes the information to extract from this document and the tags │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ to extract it into.                                                                          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ &lt;output&gt;                                                                                     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │   &lt;string description=\"Faithful summary of the text\" format=\"guardrails/reading_time: 3.0;   │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ guardrails/valid_length: 100 1000; guardrails/similar_to_document: 'The Humorous Story an    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ American Development.— ItsDifference from Comic and Witty Stories.DO not claim that I can    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ tell a story as it ought tobe told. I only claim to know how a storyought to be told, for I  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ have been almost daily in thecompany of the most expert story-tellers for manyyears.There    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ are several kinds of stories, but only onedifficult kind —the humorous. I will talk          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ mainlyabout that one. The humorous story is American,the comic story is English, the witty   │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ story is French.The humorous story depends for its effect upon themanner of the telling; the │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ comic story and the wittystory upon the matter.The humorous story may be spun out to         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ greatlength, and may wander around as much as itpleases, and arrive nowhere in particular;   │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ but thecomic and witty stories must be brief and end witha point. The humorous story bubbles │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ gently along,the others burst.The humorous story is strictly a work of art —high and         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ delicate art — and only an artist can tell it;but no art is necessary in telling the comic   │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ and thewitty story; anybody can do it. The art of tellinga humorous story — understand, I    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ mean by word ofmouth, not print — was created in America, andhas remained at home.The        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ humorous story is told gravely; the tellerdoes his best to conceal the fact that he even     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ dimlysuspects that there is anything funny about it; butthe teller of the comic story tells  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ you beforehandthat it is one of the funniest things he has everheard, then tells it with     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ eager delight, and is thefirst person to laugh when he gets through. Andsometimes, if he has │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ had good success, he is so gladand happy that he will repeat the ‘‘ nub’’ of it andslance    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ around from face to face, collecting applause,and then repeat it again. It is a pathetic     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ thing tosee.Very often, of course, the rambling and disjointedhumorous story finishes with a │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ nub, point, snapper,or whatever you like to call it. Then the listenermust be alert, for in  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ many cases the teller will divertattention from that nub by dropping it in a                 │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ carefully.casual and indifferent way, with the pretence that hedoes not know it is a         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ nub.Artemus Ward used that trick a good deal; thenwhen the belated audience presently caught │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ the jokehe would look up with innocent surprise, as ifwondering what they had found to laugh │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ at. DanSetchell used it before him, Nye and Riley andothers use it to-day.But the teller of  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ the comic story does not slurthe nub; he shouts it at you—every time. Andwhen he prints it,  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ in England, France, Germany,and Italy, he italicizes it, puts some                           │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ whoopingexclamation-points after it, and sometimes explainsit in a parenthesis. All of which │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ is very depressing,and makes one want to renounce joking and lead abetter life.- Mark Twain' │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ 0.6 all-MiniLM-L6-v2\" name=\"summary\" required=\"true\"&gt;&lt;/string&gt;                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ &lt;/output&gt;                                                                                    │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ ONLY return a valid JSON object (no other text is necessary), where the key of the field in  │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ JSON is the `name` attribute of the corresponding XML, and the value is of the type          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ specified by the corresponding XML's tag. The JSON MUST conform to the XML format, including │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ any types and format requests e.g. requests for lists, objects and specific types. Be        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ correct and concise. If you are unsure anywhere, enter `null`.                               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ Here are examples of simple (XML, JSON) pairs that show the expected behavior:               │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`          │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE',        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ 'STRING TWO', etc.]}`                                                                        │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer            │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ name=\"index\" format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index':     │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │ 1}}`                                                                                         │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ │      │                                                                                              │ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">│ └──────┴──────────────────────────────────────────────────────────────────────────────────────────────┘ │</span> │<br />│   │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ The following XML is invalid:                                                                           │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE', 'STRING TWO',     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ etc.]}`                                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ The following JSON is invalid:                                                                          │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE', 'STRING TWO',     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ etc.]}`                                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ The following XML is valid:                                                                             │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE', 'STRING TWO',     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ etc.]}`                                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ The following JSON is valid:                                                                            │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE', 'STRING TWO',     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ etc.]}`                                                                                                 │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│                                                                                                         │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ The following XML is valid:                                                                             │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`                     │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">│ - `&lt;list                                                                                                │</span> │<br />│   │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />│   │ <span style=\"background-color: #f0fff0\">│ None                                                                                                    │</span> │<br />│   │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />│   ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br />└── ╭────────────────────────────────────────────────── Step 1 ───────────────────────────────────────────────────╮<br />    │ <span style=\"background-color: #e7dfeb\">╭─────────────────────────────────────────────── Messages ────────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┏━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\">   Role </span><span style=\"background-color: #e7dfeb\">┃</span><span style=\"background-color: #e7dfeb; font-weight: bold\"> Content                                                                                    </span><span style=\"background-color: #e7dfeb\">┃ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ┡━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │ system │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ You are a helpful assistant only capable of communicating with valid JSON, and no other    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ text.                                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ ONLY return a valid JSON object (no other text is necessary), where the key of the field   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ in JSON is the `name` attribute of the corresponding XML, and the value is of the type     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ specified by the corresponding XML's tag. The JSON MUST conform to the XML format,         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ including any types and format requests e.g. requests for lists, objects and specific      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ types. Be correct and concise. If you are unsure anywhere, enter `null`.                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Here are examples of simple (XML, JSON) pairs that show the expected behavior:             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ - `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; `{'foo': 'example one'}`        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ - `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt; `{\"bar\": ['STRING ONE',      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ 'STRING TWO', etc.]}`                                                                      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer          │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ name=\"index\" format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index':   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ 1}}`                                                                                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ ├────────┼────────────────────────────────────────────────────────────────────────────────────────────┤ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │   user │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ I was given the following response, which was not parseable as JSON.                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ \"The following XML is invalid:\n- `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt; │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{'foo': 'example one'}`\n- `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt;    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{\"bar\": ['STRING ONE', 'STRING TWO', etc.]}`\n- `&lt;object name='baz'&gt;&lt;string             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`\n\nThe  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ following JSON is invalid:\n- `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt;     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{'foo': 'example one'}`\n- `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt;    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{\"bar\": ['STRING ONE', 'STRING TWO', etc.]}`\n- `&lt;object name='baz'&gt;&lt;string             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`\n\nThe  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ following XML is valid:\n- `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt;        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{'foo': 'example one'}`\n- `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt;    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{\"bar\": ['STRING ONE', 'STRING TWO', etc.]}`\n- `&lt;object name='baz'&gt;&lt;string             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`\n\nThe  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ following JSON is valid:\n- `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt;       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{'foo': 'example one'}`\n- `&lt;list name='bar'&gt;&lt;string format='upper-case' /&gt;&lt;/list&gt;` =&gt;    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{\"bar\": ['STRING ONE', 'STRING TWO', etc.]}`\n- `&lt;object name='baz'&gt;&lt;string             │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"                     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`\n\nThe  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ following XML is valid:\n- `&lt;string name='foo' format='two-words lower-case' /&gt;` =&gt;        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ `{'foo': 'example one'}`\n- `&lt;list\"                                                        │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Help me correct this by making it valid JSON.                                              │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Given below is XML that describes the information to extract from this document and the    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ tags to extract it into.                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ &lt;output&gt;                                                                                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │   &lt;string description=\"Faithful summary of the text\" format=\"guardrails/reading_time: 3.0; │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ guardrails/valid_length: 100 1000; guardrails/similar_to_document: 'The Humorous Story an  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ American Development.— ItsDifference from Comic and Witty Stories.DO not claim that I can  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ tell a story as it ought tobe told. I only claim to know how a storyought to be told, for  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ I have been almost daily in thecompany of the most expert story-tellers for                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ manyyears.There are several kinds of stories, but only onedifficult kind —the humorous. I  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ will talk mainlyabout that one. The humorous story is American,the comic story is English, │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ the witty story is French.The humorous story depends for its effect upon themanner of the  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ telling; the comic story and the wittystory upon the matter.The humorous story may be spun │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ out to greatlength, and may wander around as much as itpleases, and arrive nowhere in      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ particular; but thecomic and witty stories must be brief and end witha point. The humorous │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ story bubbles gently along,the others burst.The humorous story is strictly a work of art   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ —high and delicate art — and only an artist can tell it;but no art is necessary in telling │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ the comic and thewitty story; anybody can do it. The art of tellinga humorous story —      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ understand, I mean by word ofmouth, not print — was created in America, andhas remained at │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ home.The humorous story is told gravely; the tellerdoes his best to conceal the fact that  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ he even dimlysuspects that there is anything funny about it; butthe teller of the comic    │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ story tells you beforehandthat it is one of the funniest things he has everheard, then     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ tells it with eager delight, and is thefirst person to laugh when he gets through.         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ Andsometimes, if he has had good success, he is so gladand happy that he will repeat the   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ ‘‘ nub’’ of it andslance around from face to face, collecting applause,and then repeat it  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ again. It is a pathetic thing tosee.Very often, of course, the rambling and                │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ disjointedhumorous story finishes with a nub, point, snapper,or whatever you like to call  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ it. Then the listenermust be alert, for in many cases the teller will divertattention from │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ that nub by dropping it in a carefully.casual and indifferent way, with the pretence that  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ hedoes not know it is a nub.Artemus Ward used that trick a good deal; thenwhen the belated │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ audience presently caught the jokehe would look up with innocent surprise, as ifwondering  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ what they had found to laugh at. DanSetchell used it before him, Nye and Riley andothers   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ use it to-day.But the teller of the comic story does not slurthe nub; he shouts it at      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ you—every time. Andwhen he prints it, in England, France, Germany,and Italy, he italicizes │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ it, puts some whoopingexclamation-points after it, and sometimes explainsit in a           │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ parenthesis. All of which is very depressing,and makes one want to renounce joking and     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ lead abetter life.- Mark Twain' 0.6 all-MiniLM-L6-v2\" name=\"summary\"                       │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ required=\"true\"&gt;&lt;/string&gt;                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ &lt;/output&gt;                                                                                  │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ ONLY return a valid JSON object (no other text is necessary), where the key of the field   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ in JSON is the `name` attribute of the corresponding XML, and the value is of the type     │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ specified by the corresponding XML's tag. The JSON MUST conform to the XML format,         │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ including any types and format requests e.g. requests for lists, objects and specific      │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │ types. Be correct and concise. If you are unsure anywhere, enter `null`.                   │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ │        │                                                                                            │ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">│ └────────┴────────────────────────────────────────────────────────────────────────────────────────────┘ │</span> │<br />    │ <span style=\"background-color: #e7dfeb\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╭──────────────────────────────────────────── Raw LLM Output ─────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt; `{'baz': {'foo': 'Some String', 'index': 1}}`                        │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ - `&lt;object name='baz'&gt;&lt;string name=\"foo\" format=\"capitalize two-words\" /&gt;&lt;integer name=\"index\"          │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">│ format=\"1-indexed\" /&gt;&lt;/object&gt;` =&gt;                                                                      │</span> │<br />    │ <span style=\"background-color: #f5f5dc\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    │ <span style=\"background-color: #f0fff0\">╭─────────────────────────────────────────── Validated Output ────────────────────────────────────────────╮</span> │<br />    │ <span style=\"background-color: #f0fff0\">│ None                                                                                                    │</span> │<br />    │ <span style=\"background-color: #f0fff0\">╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span> │<br />    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯<br /></pre>"}} />
